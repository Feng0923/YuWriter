CPU
===
### 1.CPU的功能和组成
- 控制器的功能
	- 取指令
	- 分析指令
	- 执行指令
	- 控制程序的输入即结果的输出
	- 总线管理
	- 处理异常情况和特殊请求
- 运算器的功能
	- 实现算数运算和逻辑运算 

### 2.CPU的结构
- ALU: 实现算数运算和逻辑运算,存放操作数的寄存器和实现算逻运算的部件;
- 寄存器:专用于存放当前指令的地址(取指令),存放当前指令和对指令操作码进行译码的部件(分析指令);
- CU: 能发出各种操作命令序列的控制部件(执行指令);
- 中断系统: 处理异常情况和特殊请求;

### 3.指令周期的概念
指令周期: CPU每取出并执行一条指令所需的全部时间称为指令周期(CPU完成一条指令的时间);
一条完整的指令周期应包括:

- 取指周期: 取指阶段完成取指令和分析指令的操作;
- 执行周期: 执行阶段完成执行指令的操作;
- 间址周期: 取操作数的有效地址;
- 中断周期: 如果有中断请求,则要进入中断响应阶段;

#### 1.取指周期数据流:
PC`$\to$`MAR$\to$M$\to$MDR$\to$IR

#### 2.间址周期的数据流:
一旦取指周期结束,CU边检查IR中的内容,以确定其是否有间址操作,如果有则将MDR中的形式地址(记作Ad(MDR))将被送到MAR,又送至地址总线,此后CU向存储器发读命令,以获取有效地址并存至MDR;

#### 3.中断周期的数据流:
CU把用于保存程序断点的存储器特殊地址(如栈指针的内容)送往MAR,并送至地址总线上,然后由CU向存储器发写命令,并将PC的内容(程序断点)送至MDR,最终是程序断点经数据总线存入存储器.此外,CU还需将中断服务程序的入口地址送至PC,为下一个指令周期的取指周期做好准备.

### 4.中断屏蔽技术
主要用于多重中断.

### 5.中断周期
1.CU将特定地址"0"送至MDR,记作 0$\to$MAR.
2.CU通过控制总线向主存发送写命令,启动存储器作写操作,记作1$\to$W.
3.将PC的内容(程序断点)送至MDR,记作PC$\to$MDR.
4.将MDR的内容通过数据总线写到MAR所指的主存单元中,记作MDR$\to$M(MAR).
5.将向量地址送至PC,记作向量$\to$PC
6.关中断,将允许中断触发器清零,记作0$\to$EINT.








